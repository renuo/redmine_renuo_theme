var PurpleMine;(PurpleMine=PurpleMine||{}).AttachmentCollapse=function(){"use strict";var a,t={en:{attachmentToggler:"Expand/collapse attachments"},ro:{attachmentToggler:"Expand/collapse top menu"},fr:{attachmentToggler:"Élargir/réduire les pièces jointes"},pl:{attachmentToggler:"Expand/collapse top menu"},de:{attachmentToggler:"Anhänge aufklappen/zusammenklappen"},ja:{attachmentToggler:"添付ファイルの展開/折りたたみ"}};function e(){if(a)return a;(a=this).lang=document.documentElement.lang,void 0===t[this.lang]&&(this.lang="en"),this._=t[this.lang];var e=$("body.controller-issues");null!==e&&e.length&&(this.attachment=e.find(".attachments"),function(e){var t='<input type="button" class="attachment-toggler"" value="'+a._.attachmentToggler+'"></a>';a.$toggler=$(t),e.before(a.$toggler),e.before("<br /><br />"),a.$toggler.on("click",a.toggl)}(this.attachment),a.collapse())}return e.prototype.toggl=function(e){a.isCollapsed(a.attachment)?a.expand(a.attachment):a.collapse(a.attachment)},e.prototype.isCollapsed=function(){return this.attachment.collapsed},e.prototype.expand=function(){this.attachment.collapsed=!1,$(this.attachment).show()},e.prototype.collapse=function(){this.attachment.collapsed=!0,$(this.attachment).hide()},e}(),(PurpleMine=PurpleMine||{}).HistoryTabs=function(){"use strict";var i,s={en:{all:"All",notes:"Notes",details:"Changes"},ro:{all:"Toate",notes:"Note",details:"Schimbări"},fr:{all:"Tout",notes:"Remarques",details:"Changements"},pl:{all:"Wszystko",notes:"Notatki",details:"Zmiany"},de:{all:"Alles",notes:"Kommentare",details:"Änderungen"},ja:{all:"すべて",notes:"注記",details:"変更"}};var o=function(){var e=$(this),t=e.attr("data-tab");i.$tabs.removeClass("selected"),e.addClass("selected"),i.$history.removeClass("hide-details").removeClass("hide-notes"),"notes"===t?i.$history.addClass("hide-details"):"details"===t&&i.$history.addClass("hide-notes")};return function(){if(i)return i;var e,t,a,n;(i=this).$tabsContainer=null,this.$tabs=null,this.$history=$("#history"),this.lang=document.documentElement.lang,void 0===s[this.lang]&&(this.lang="en"),this._=s[this.lang],0<this.$history.length&&0<$("#history > h3").length&&(e="",n="</a></li>",e+='<div class="tabs"><ul>',e+=(t='<li><a href="javascript:;" class="')+"selected "+(a='history-tab" data-tab="')+'all">'+i._.all+n,e+=t+a+'notes">'+i._.notes+n,e+=t+a+'details">'+i._.details+n,e+="</ul></div>",i.$tabsContainer=$(e),$("#history > h3").after(i.$tabsContainer),i.$tabs=i.$tabsContainer.find(".history-tab"),i.$tabs.on("click",o),i.$history.find(".has-notes:first").addClass("first-of-notes"),i.$history.find(".has-details:first").addClass("first-of-details"))}}(),(PurpleMine=PurpleMine||{}).MenuCollapse=function(){"use strict";var s,t={en:{topMenuToggler:"Expand/collapse top menu"},ro:{topMenuToggler:"Deschide/închide meniul de sus"},fr:{topMenuToggler:"Développer/réduire le menu principal"},pl:{topMenuToggler:"Zwiń/rozwiń górne menu"},de:{topMenuToggler:"Ein-/Ausklappen Hauptmenu"},ja:{topMenuToggler:"トップメニューの展開/折りたたみ"}};function e(){if(s)return s;for(var e in(s=this).lang=document.documentElement.lang,void 0===t[this.lang]&&(this.lang="en"),this._=t[this.lang],this.menus={top:{$el:$("#top-menu")}},this.menus)this.menus.hasOwnProperty(e)&&0<this.menus[e].$el.length&&a(e)}function a(e){var t,a,n,i;"none"!==s.menus[e].$el.css("maxHeight")&&(s.menus[e].collapsed=!0,window.localStorage&&(s.menus[e].collapsed=null===localStorage.getItem(o(e))),a=(t=e)+"-menu-toggler",n=s._[t+"MenuToggler"],i='<a href="javascript:;" class="'+a+'" title="'+n+'"></a>',s.menus[t].$toggler=$(i),s.menus[t].$el.prepend(s.menus[t].$toggler),s.menus[t].$toggler.on("click",{menu:t},s.toggleMenu),!1===s.isCollapsed(e)&&s.expandMenu(e))}function o(e){return"PurpleMine:"+e+"MenuExpanded"}return e.prototype.toggleMenu=function(e){var t=e.data.menu||"";s.isCollapsed(t)?s.expandMenu(t):s.collapseMenu(t)},e.prototype.isCollapsed=function(e){return this.menus[e].collapsed},e.prototype.expandMenu=function(e){this.menus[e].$el.addClass("expanded"),this.menus[e].$toggler.addClass("expanded"),this.menus[e].collapsed=!1,window.localStorage&&localStorage.setItem(o(e),"x")},e.prototype.collapseMenu=function(e){this.menus[e].$el.removeClass("expanded"),this.menus[e].$toggler.removeClass("expanded"),this.menus[e].collapsed=!0,window.localStorage&&localStorage.removeItem(o(e))},e}(),(PurpleMine=PurpleMine||{}).RevisionGraph=function(e,t,a){"use strict";var n=t,i=$.map(n,function(e){return e}),s=i.length-1,o=$("table.changesets tr.changeset");null!==revisionGraph?revisionGraph.clear():revisionGraph=new Raphael(e);var l=revisionGraph.set(),r=o.first().find("td").first().position().left-$(e).position().left,d=$(e).position().top,p=r+20*(a+1),h=o.last().position().top+o.last().height()-d;revisionGraph.setSize(p,h);var c,u,g,m,f,b,v,y=["#e74c3c","#584492","#019851","#ed820c","#4183c4"];if(a>=y.length){Raphael.getColor.reset();for(var C=0;C<=a;C++)y.push(Raphael.getColor(.9))}$.each(i,function(e,a){a.hasOwnProperty("space")||(a.space=0),g=o.eq(s-a.rdmid).position().top-d+17,u=10+r+20*a.space,revisionGraph.circle(u,g,3.5).attr({fill:y[a.space],stroke:"none"}).toFront(),$.each(a.parent_scmids,function(e,t){c=n[t],(c?(c.hasOwnProperty("space")||(c.space=0),f=o.eq(s-c.rdmid).position().top-d+17,m=10+r+20*c.space,c.space===a.space?revisionGraph.path(["M",u,g,"V",f]):revisionGraph.path(["M",u,g,"C",u,g,u,g+(f-g)/2,u+(m-u)/2,g+(f-g)/2,"C",u+(m-u)/2,g+(f-g)/2,m,f-(f-g)/2,m,f])):revisionGraph.path(["M",u,g,"V",h])).attr({stroke:y[a.space],"stroke-width":1.5}).toBack()}),(v=revisionGraph.circle(u,g,10)).attr({fill:"#000",opacity:0,cursor:"pointer",href:a.href}),null!==a.refs&&0<a.refs.length&&((b=document.createElementNS(revisionGraph.canvas.namespaceURI,"title")).appendChild(document.createTextNode(a.refs)),v.node.appendChild(b)),l.push(v)}),l.toFront()},$(function(){"use strict";window.drawRevisionGraph&&(window.drawRevisionGraph=PurpleMine.RevisionGraph,$(window).resize())}),(PurpleMine=PurpleMine||{}).SidebarToggler=function(){"use strict";var a,e={en:{toggler:"Toggle sidebar"},ro:{toggler:"Deschide/închide bara laterală"},fr:{toggler:"Basculer la barre latérale"},pl:{toggler:"Pokaż/ukryj panel boczny"},ja:{toggler:"サイドバーの切り替え"}};function t(){if(a)return a;(a=this).sidebarVisible=!0,this.sidebarHiding=null,this.$toggler=null,this.$main=$("#main"),this.$sidebar=$("#sidebar"),this.lang=document.documentElement.lang,void 0===e[this.lang]&&(this.lang="en"),this._=e[this.lang],"relative"===this.$main.css("position")&&$(window).on("load",function(){$("#context-menu").appendTo("#wrapper3")}),function(){window.localStorage&&(a.sidebarVisible=null===localStorage.getItem("PurpleMine:sidebarHidden"));0<a.$sidebar.length&&!1===a.$main.hasClass("nosidebar")&&(function(){var e='<a href="javascript:;" class="sidebar-toggler" title="'+a._.toggler+'"></a>';a.$toggler=$(e),a.$main.append(a.$toggler),a.$toggler.on("click",a.toggleSidebar)}(),function(){var t=document.getElementsByTagName("body")[0];window.onkeydown=function(e){t===e.target&&83===e.keyCode&&!1===e.ctrlKey&&!1===e.altKey&&!1===e.shiftKey&&a.toggleSidebar()}}(),!1===a.sidebarVisible&&a.hideSidebar(!0))}()}return t.prototype.toggleSidebar=function(){a.sidebarVisible?a.hideSidebar():a.showSidebar()},t.prototype.hideSidebar=function(e){!0===e?this.$sidebar.addClass("sidebar-hiding sidebar-hidden"):(this.$sidebar.addClass("sidebar-hiding"),this.sidebarHiding=setTimeout(function(){a.$sidebar.addClass("sidebar-hidden")},500)),this.$toggler.addClass("sidebar-hidden"),this.sidebarVisible=!1,window.localStorage&&localStorage.setItem("PurpleMine:sidebarHidden","x")},t.prototype.showSidebar=function(){clearTimeout(this.sidebarHiding),a.$sidebar.removeClass("sidebar-hidden"),setTimeout(function(){a.$sidebar.removeClass("sidebar-hiding")},50),this.$toggler.removeClass("sidebar-hidden"),this.sidebarVisible=!0,window.localStorage&&localStorage.removeItem("PurpleMine:sidebarHidden")},t}(),$(function(){"use strict";new PurpleMine.SidebarToggler,new PurpleMine.HistoryTabs,new PurpleMine.MenuCollapse,new PurpleMine.AttachmentCollapse});